{
	"person": {
		"name": "Brandon Barker",
		"githubUsername": "ProjectBarks",
		"imageURL": "https://avatars.githubusercontent.com/u/4194371?v=4",
		"bio": "I am a proud tinkerer, inventor, nerd, student, and full-time software developer.",
		"primary": true
	},
	"plugins": [
		{
			"files": [
				{
					"path": "System/screenshot.1d.py",
					"filename": "screenshot.1d.py",
					"content": "#!/usr/bin/env python\n# coding=utf-8\n# \u003cbitbar.title\u003eScreenshot\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.1\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eBrandon Barker, Soumya Ranjan Mohanty\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003eProjectBarks, geekysrm\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eAllows for screenshots to be uploaded, saved, and added to the clipboard\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttp://i.imgur.com/51rg3EJ.png\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003epython\u003c/bitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttps://github.com/matryer/bitbar-plugins/blob/master/System/screenshot.1d.py\u003c/bitbar.abouturl\u003e\n\nimport os, subprocess, tempfile, hashlib, requests, sys, platform, time\nfrom distutils.version import StrictVersion\n\nSAVE_PATH = \"~/Pictures/\"\n\n\ndef screenshot(path, copy_to_clipboard=False, show_cursor=False, show_errors=False, interactive=False,\n               only_main_monitor=False, window_mode=False, open_in_preview=False, selection_mode=True,\n               sounds=True, delay=5):\n    params = \"\"\n    if copy_to_clipboard:\n        params += \"-c \"\n    if show_cursor:\n        params += \"-C \"\n    if show_errors:\n        params += \"-d \"\n    if interactive:\n        params += \"-i \"\n    if only_main_monitor:\n        params += \"-m \"\n    if window_mode:\n        params += \"-o \"\n    if open_in_preview:\n        params += \"-P \"\n    if selection_mode:\n        params += \"-s \"\n    if sounds:\n        params += \"-x \"\n    if delay != 5 and delay \u003e= 0:\n        params += \"-T {} \".format(delay)\n\n    os.system(\"screencapture {} {}\".format(params, path))\n    return os.path.isfile(path)\n\n\ndef text_to_clipboard(output):\n    process = subprocess.Popen('pbcopy', env={'LANG': 'en_US.UTF-8'}, stdin=subprocess.PIPE)\n    process.communicate(output.encode('utf-8'))\n\n\ndef notify(title, subtitle, message):\n    command = \"display notification \\\"{}\\\" with title \\\"{}\\\"\".format(message, title)\n    if len(subtitle) \u003e 0:\n        command += \" subtitle \\\"{}\\\"\".format(subtitle)\n    os.system(\"osascript -e '{}'\".format(command))\n\n\ndef upload_image(upload):\n    # upload is the path of the image\n    headers = {\n        'authorization': 'Client-ID 6fcd294cd0e8aa1',\n    }  \n    files = {\n        'image': (open(upload, 'rb')),\n    }\n    r = requests.post('https://api.imgur.com/3/upload', headers=headers, files=files)\n    import json\n    return json.loads(r.text)['data']['link']\n\nclass Command(object):\n    def __init__(self, title, name):\n        self.title = title\n        self.name = name\n\n    def get_name(self):\n        return self.name\n\n    def get_description(self):\n        return \"{0} |bash={2} param1={1} terminal=false\".format(self.title, self.name, os.path.realpath(__file__))\n\n    def execute(self):\n        raise Exception(\"Abstract Function\")\n\n\nclass Upload(Command):\n    def __init__(self):\n        super(Upload, self).__init__(\"Upload Online\", \"upload\")\n\n    def execute(self):\n        temp_path = tempfile.NamedTemporaryFile().name + \".png\"\n        if not screenshot(temp_path):\n            exit()\n        notify(\"Uploading Screenshot\", \"\", \"Your image is being uploaded online!\")\n        url = upload_image(temp_path)\n        os.remove(temp_path)\n        notify(\"Copied Screenshot\", \"\", \"Image URL copied to clipboard!\")\n        text_to_clipboard(url)\n\n\nclass Clipboard(Command):\n    def __init__(self):\n        super(Clipboard, self).__init__(\"Copy to Clipboard\", \"clipboard\")\n\n    def execute(self):\n        temp_path = tempfile.NamedTemporaryFile().name + \".png\"\n        if not screenshot(temp_path):\n            exit()\n        os.system(\"osascript -e 'set the clipboard to POSIX file \\\"{}\\\"'\".format(temp_path))\n        notify(\"Copied Screenshot\", \"\", \"Image copied to clipboard!\")\n\n\nclass SaveFile(Command):\n    def __init__(self):\n        super(SaveFile, self).__init__(\"Save to File\", \"save\")\n\n    def execute(self):\n        temp_path = os.path.join(os.path.expanduser(SAVE_PATH), time.strftime(\"screenshot-%Y%m%d-%H%M%S.png\"))\n        parent = os.path.dirname(temp_path)\n        if not os.path.isdir(parent):\n            os.mkdir(parent)\n        if not screenshot(temp_path):\n            exit()\n        os.system(\"open -R {0}\".format(temp_path))\n\n\nversion = platform.mac_ver()[0]\nif StrictVersion(version) \u003c StrictVersion(\"10.9\"):\n    raise Exception(\"Mac OSX is too old!\")\n\nsub_commands = [Upload(), Clipboard(), SaveFile()]\n\nif len(sys.argv) \u003c= 1:\n    print(\"üì∏\")\n    print(\"---\")\n    for sub_command in sub_commands:\n        print(sub_command.get_description())\nelse:\n    try:\n        for sub_command in sub_commands:\n            if sub_command.get_name() != sys.argv[1]:\n                continue\n            sub_command.execute()\n    except Exception, e:\n        notify(\"Error\", \"\", str(e))\n"
				}
			],
			"path": "System/screenshot.1d.py",
			"filename": "screenshot.1d.py",
			"dir": "System",
			"docsPlugin": "System/screenshot.1d.py.html",
			"docsCategory": "System.html",
			"pathSegments": [
				"System"
			],
			"categoryPathSegments": [
				{
					"path": "System",
					"text": "System",
					"isLast": true
				}
			],
			"title": "Screenshot",
			"version": "v1.1",
			"author": "Brandon Barker,  Soumya Ranjan Mohanty",
			"authors": [
				{
					"name": "Brandon Barker",
					"githubUsername": "ProjectBarks",
					"imageURL": "https://avatars.githubusercontent.com/u/4194371?v=4",
					"bio": "I am a proud tinkerer, inventor, nerd, student, and full-time software developer.",
					"primary": true
				},
				{
					"name": "Soumya Ranjan Mohanty",
					"githubUsername": "geekysrm",
					"imageURL": "https://avatars.githubusercontent.com/u/10224804?v=4",
					"bio": "Software Engineer @JLL;\r\n@google Certified Mobile Web Specialist, Google India Scholar '18, Fullstack WebDev, ‚ù§Ô∏è Music, Ex-Dell, Ex-Hasura\r\n\r\n",
					"primary": false
				}
			],
			"desc": "Allows for screenshots to be uploaded, saved, and added to the clipboard",
			"imageURL": "http://i.imgur.com/51rg3EJ.png",
			"dependencies": [
				"python"
			],
			"aboutURL": "https://github.com/matryer/bitbar-plugins/blob/master/System/screenshot.1d.py",
			"lastUpdated": "2021-03-08T15:22:04.590766Z",
			"vars": null
		}
	]
}