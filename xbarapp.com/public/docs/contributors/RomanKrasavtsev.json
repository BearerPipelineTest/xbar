{
	"person": {
		"name": "Roman Krasavtsev",
		"githubUsername": "RomanKrasavtsev",
		"imageURL": "https://avatars.githubusercontent.com/u/12496512?v=4",
		"bio": "Passionate DevOps Engineer",
		"primary": true
	},
	"plugins": [
		{
			"files": [
				{
					"path": "Finance/moex.1m.rb",
					"filename": "moex.1m.rb",
					"content": "#!/usr/bin/env ruby\n\n# \u003cbitbar.title\u003eThe Russian Ruble exchange rates\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eRoman Krasavtsev\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003eRomanKrasavtsev\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eThe Russian Ruble exchange rates from Moscow Exchange\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttps://raw.github.com/romankrasavtsev/moex-bitbar-plugin/master/moex_emoji.png\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003eruby\u003c/bitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttps://github.com/RomanKrasavtsev/moex-bitbar-plugin\u003c/bitbar.abouturl\u003e\n\nrequire \"nokogiri\"\nrequire \"open-uri\"\n\ndef get_exchange_rate emoji, *currencies\n  result_string = \"\"\n\n  currencies.each do |currency|\n    pair, sign = get_pair_sign emoji, currency\n\n    if pair\n      rate = Nokogiri::HTML(open(\"http://moex.com/ru/derivatives/currency-rate.aspx?currency=#{pair}\"))\n        .css(\"#ctl00_PageContent_tbxCurrentRate b\")\n        .to_s.gsub(/\u003cb\u003e/, \"\").gsub(/\u003c\\/b\u003e/, \"\")\n        .gsub(/Ð¢ÐµÐºÑƒÑ‰ÐµÐµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ:  /, \"\")\n        .slice(/\\d+,\\d./)\n    else\n      rate = \"Unknown sign\"\n    end\n\n    result_string += \"#{sign} #{rate}  \"\n  end\n\n  result_string\nend\n\ndef get_pair_sign emoji, currency\n  case currency\n  when \"USD\"\n    pair, sign  = [\"USD_RUB\", emoji ? \"ðŸ‡ºðŸ‡¸\" : \"$\"]\n  when \"EUR\"\n    pair, sign = [\"EUR_RUB\", emoji ? \"ðŸ‡ªðŸ‡º\" : \"â‚¬\"]\n  when \"CHF\"\n    pair, sign = [\"CHF_RUB\", emoji ? \"ðŸ‡¨ðŸ‡­\" : \"Fr\"]\n  when \"JPY\"\n    pair, sign = [\"JPY_RUB\", emoji ? \"ðŸ‡¯ðŸ‡µ\" : \"JÂ¥\"]\n  when \"CNY\"\n    pair, sign = [\"CNY_RUB\", emoji ? \"ðŸ‡¨ðŸ‡³\" : \"CÂ¥\"]\n  when \"CAD\"\n    pair, sign = [\"CAD_RUB\", emoji ? \"ðŸ‡¨ðŸ‡¦\" : \"C$\"]\n  when \"TRY\"\n    pair, sign  = [\"TRY_RUB\", emoji ? \"ðŸ‡¹ðŸ‡·\" : \"â‚º\"]\n  else\n    pair, sign = [nil, \"\"]\n  end\n\n  [pair, sign]\nend\n\n# Supported currencies:\n# USD - United States dollar\n# EUR - Euro\n# CHF - Swiss franc\n# JPY - Japanese yen\n# CNY - Chinese yuan\n# CAD - Canadian dollar\n# TRY - Turkish lira\n\nemoji = true\nputs get_exchange_rate emoji, \"USD\", \"EUR\", \"CAD\"\n"
				}
			],
			"path": "Finance/moex.1m.rb",
			"filename": "moex.1m.rb",
			"dir": "Finance",
			"docsPlugin": "Finance/moex.1m.rb.html",
			"docsCategory": "Finance.html",
			"pathSegments": [
				"Finance"
			],
			"categoryPathSegments": [
				{
					"path": "Finance",
					"text": "Finance",
					"isLast": true
				}
			],
			"title": "The Russian Ruble exchange rates",
			"version": "v1.0",
			"author": "Roman Krasavtsev",
			"authors": [
				{
					"name": "Roman Krasavtsev",
					"githubUsername": "RomanKrasavtsev",
					"imageURL": "https://avatars.githubusercontent.com/u/12496512?v=4",
					"bio": "Passionate DevOps Engineer",
					"primary": true
				}
			],
			"desc": "The Russian Ruble exchange rates from Moscow Exchange",
			"imageURL": "https://raw.github.com/romankrasavtsev/moex-bitbar-plugin/master/moex_emoji.png",
			"dependencies": [
				"ruby"
			],
			"aboutURL": "https://github.com/RomanKrasavtsev/moex-bitbar-plugin",
			"lastUpdated": "2021-03-08T15:21:53.629793Z",
			"vars": null
		}
	]
}