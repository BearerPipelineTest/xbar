{
	"person": {
		"name": "Sai Sasidhar Maddali",
		"githubUsername": "saisasidhar",
		"imageURL": "https://avatars.githubusercontent.com/u/4975157?v=4",
		"bio": "",
		"primary": true
	},
	"plugins": [
		{
			"files": [
				{
					"path": "Network/protonvpn.15m.py",
					"filename": "protonvpn.15m.py",
					"content": "#!/usr/bin/python\n# -*- coding: utf-8 -*-\n#\n# \u003cbitbar.title\u003eProtonVPN Server Monitor\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eSai Sasidhar Maddali\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003esaisasidhar\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eDisplays ProtonVPN server load for free and user defined servers\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttps://raw.githubusercontent.com/saisasidhar/utils/master/bitbar-argos/ProtonVPN/preview-bitbar.png\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003epython\u003c/bitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttps://github.com/saisasidhar/utils/tree/master/bitbar-argos/ProtonVPN\u003c/bitbar.abouturl\u003e\n\ntry:\n    # for python3\n    from urllib.request import urlopen\nexcept ImportError:\n    # fallback to python2 urllib2\n    from urllib2 import urlopen\n\nimport json\n\nmenu_titles = []\nmenu_items = []\nmenu_end = []\nfree_servers = []\ncustom_servers = []\n\n# Change this to track custom VPN servers. For example: [\"NL#1\", \"NL#13\", \"NL#25\"]\ncustom_server_names = []\n# Change this to display/hide free VPN servers\ndisplay_free = True\n# Change this to display/hide country flags (emoji)\ndisplay_flags = False\n# However, flag emojis are not shown in macOS when emoji code such as :in: is used (Tested on macOS 10.12.5)\n# Nevertheless, this flag can be set to true for argos (gnome extension)\n\ntry:\n    api_response = urlopen(\"https://api.protonmail.ch/vpn/logicals\")\n    string_response = api_response.read().decode(\"utf-8\")\n    available_servers = json.loads(string_response)[\"LogicalServers\"]\n\n    if display_free:\n        free_servers = [server for server in available_servers if server[\"Tier\"] == 0]\n\n    if len(custom_server_names) != 0:\n        custom_servers = [server for server in available_servers if server[\"Name\"] in custom_server_names]\n\n    track_servers = custom_servers + free_servers\n\n    if len(track_servers) != 0:\n        min_load_server = min(track_servers, key=lambda x:x[\"Load\"])\n\n        menu_titles.append(str(min_load_server[\"Load\"]) + \"% load on \" + min_load_server[\"Name\"])\n        menu_titles.append(\"---\")\n        for ts in track_servers:\n            menu_items.append(str(\":\"+ts[\"Country\"]+\":\\t\" if display_flags else \"\") +\\\n                            str(ts[\"Load\"]).zfill(2) + \"% on \" + ts[\"Name\"] +\\\n                            \"| color=\" +\\\n                            str(\"#9CCB19\" if ts[\"Load\"] \u003c 33 else (\"#FF9912\" if ts[\"Load\"]\u003c66 else \"#FF4040\")))\n\n        menu_end.append(\"---\")\n        menu_end.append(\"Refresh | refresh=true\")\n\n        for title in menu_titles:\n            print(title)\n        for item in menu_items:\n            print(item)\n        for item in menu_end:\n            print(item)\nexcept Exception as e:\n    print(\"ProtonVPN Error\")\n"
				}
			],
			"path": "Network/protonvpn.15m.py",
			"filename": "protonvpn.15m.py",
			"dir": "Network",
			"docsPlugin": "Network/protonvpn.15m.py.html",
			"docsCategory": "Network.html",
			"pathSegments": [
				"Network"
			],
			"categoryPathSegments": [
				{
					"path": "Network",
					"text": "Network",
					"isLast": true
				}
			],
			"title": "ProtonVPN Server Monitor",
			"version": "v1.0",
			"author": "Sai Sasidhar Maddali",
			"authors": [
				{
					"name": "Sai Sasidhar Maddali",
					"githubUsername": "saisasidhar",
					"imageURL": "https://avatars.githubusercontent.com/u/4975157?v=4",
					"bio": "",
					"primary": true
				}
			],
			"desc": "Displays ProtonVPN server load for free and user defined servers",
			"imageURL": "https://raw.githubusercontent.com/saisasidhar/utils/master/bitbar-argos/ProtonVPN/preview-bitbar.png",
			"dependencies": [
				"python"
			],
			"aboutURL": "https://github.com/saisasidhar/utils/tree/master/bitbar-argos/ProtonVPN",
			"lastUpdated": "2021-03-08T15:21:59.558496Z",
			"vars": null
		}
	]
}