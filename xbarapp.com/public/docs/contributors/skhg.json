{
	"person": {
		"name": "Jack Higgins",
		"githubUsername": "skhg",
		"imageURL": "https://avatars.githubusercontent.com/u/1479627?v=4",
		"bio": "Product Manager and Software Engineer",
		"primary": true
	},
	"plugins": [
		{
			"files": [
				{
					"path": "Lifestyle/tescomobileirl.1h.py",
					"filename": "tescomobileirl.1h.py",
					"content": "#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n# \u003cbitbar.title\u003eTesco Mobile Ireland Balance\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.0.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eJack Higgins\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003eskhg\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eDisplays your current Tesco Mobile Ireland balance and available data, text and voice allowances\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttps://github.com/skhg/BitBar-Plugins/blob/master/TescoMobileIrl/tescobalance.jpg?raw=true\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003epython 2.7 or 3.6, pytescomobileirl\u003c/bitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttps://github.com/skhg/BitBar-Plugins/tree/master/TescoMobileIrl\u003c/bitbar.abouturl\u003e\n\n\n\n\n\n\n\n# START USER DETAILS\n\n# Enter your tescomobile.ie login details here. These are sent only to the tesco mobile\n# website and never stored or transmitted anywhere else.\n\nphone_num = \"MyPhoneNumber\"\npassword = \"MyPassword\"\n\n# END USER DETAILS\n\n\n\n\n\n\nfrom sys import exit\n\n# VERIFY DEPENDENCIES\ntry:\n    from pytescomobileirl import TescoSession\nexcept ImportError:\n    print(\"Tesco Mobile Ireland\")\n    print(\"---\")\n    print(\"Looks like the package 'pytescomobileirl' isn't installed.\")\n    print(\"You need it to run this tool. To install, click 'Install Now',\")\n    print(\"then click 'Preferences' -\u003e 'Refresh All...'\")\n    print(\"Install Now. | bash='sudo /usr/local/bin/pip install pytescomobileirl'\")\n    exit()\n\n\n\n\n\n\n# START APP\n\nimport pickle\nimport os\nimport subprocess\n\nclass StateMgmt:\n    \n    def __init__(self):\n        os.chdir(self.get_bitbar_plugins_dir())\n        self.relative_state_dir = \"./.tescomobileirl_state/\"\n        self.state_dump_file = self.relative_state_dir+\"tescomobileirl_last_state.pickle\"\n\n    def get_bitbar_plugins_dir(self):\n        bitbar_defaults = subprocess.check_output([\"defaults\", \"read\", \"com.matryer.BitBar\"]).split(\";\")\n        for entry in bitbar_defaults:\n            if \"pluginsDirectory\" in entry:\n                return entry.split(\"\\\"\")[1]\n\n        raise IOError(\"BitBar plugins directory could not be found\")\n    \n    def check_state_dir_exists(self, state_dir):\n        if os.path.exists(state_dir) is False:\n            os.mkdir(state_dir)\n    \n    def load_state(self):\n        self.check_state_dir_exists(self.relative_state_dir)\n\n        if os.path.exists(self.state_dump_file) is False:\n            return None\n        else:\n            try:\n                with open(self.state_dump_file,\"r\") as f_read:\n                    return pickle.load(f_read)\n            except:\n                return None\n    \n    def dump_state(self, current_state):\n        self.check_state_dir_exists(self.relative_state_dir)\n\n        with open(self.state_dump_file,\"w\") as f_write:\n            pickle.dump(current_state,f_write)\n\nclass ResultsFormatter:\n\tdef print_output(self, balances, is_live):\n\t\tprint(balances.remaining_total(\"data\").summary())\n\t\tprint(\"---\")\n\t\tif is_live is False:\n\t\t    print(\"❌ : Using cached data, last update failed\")\n\t\t    print(\"---\")\n\n\t\tprint(\"Number: \"+phone_num)\n\t\tprint(\"---\")\n\t\tprint(u'€{:,.2f} credit'.format(balances.credit_remaining).encode(\"utf-8\"))\n\t\tprint(\"---\")\n\t\tprint(\"Active bundles:\")\n\t\tfor bundle in balances.active_balances():\n\t\t    print(bundle.summary() + \" for \"+ str(bundle.days_remaining())+\" days\")\n\t\tprint(\"---\")\n\n\t\tprint(\"tescomobile.ie | href=https://my.tescomobile.ie/tmi-selfcare-web/login\")\n    \n\tdef print_error_message(self):\n\t\tprint(\"❌\")\n\t\tprint(\"---\")\n\t\tprint(\"Error: Unable to retrieve Tesco Mobile state.\")\n\t\tprint(\"---\")\n\n\t\tprint(\"tescomobile.ie | href=https://my.tescomobile.ie/tmi-selfcare-web/login\")\n\ndef run():\n    login_ok= False\n\n    session = TescoSession()\n\n    try:\n        login_ok = session.login(phone_num, password)\n    except Exception:\n        pass\n\n    state = StateMgmt()\n    formatter = ResultsFormatter()\n\n    if login_ok:\n        balances = session.get_balances()\n        \n        state.dump_state(balances)\n        formatter.print_output(balances,True)\n    else:\n        loaded_state = state.load_state()\n        if loaded_state is not None:\n            formatter.print_output(loaded_state,False)\n        else:\n            formatter.print_error_message()\n\nrun()\n"
				}
			],
			"path": "Lifestyle/tescomobileirl.1h.py",
			"filename": "tescomobileirl.1h.py",
			"dir": "Lifestyle",
			"docsPlugin": "Lifestyle/tescomobileirl.1h.py.html",
			"docsCategory": "Lifestyle.html",
			"pathSegments": [
				"Lifestyle"
			],
			"categoryPathSegments": [
				{
					"path": "Lifestyle",
					"text": "Lifestyle",
					"isLast": true
				}
			],
			"title": "Tesco Mobile Ireland Balance",
			"version": "v1.0.0",
			"author": "Jack Higgins",
			"authors": [
				{
					"name": "Jack Higgins",
					"githubUsername": "skhg",
					"imageURL": "https://avatars.githubusercontent.com/u/1479627?v=4",
					"bio": "Product Manager and Software Engineer",
					"primary": true
				}
			],
			"desc": "Displays your current Tesco Mobile Ireland balance and available data, text and voice allowances",
			"imageURL": "https://github.com/skhg/BitBar-Plugins/blob/master/TescoMobileIrl/tescobalance.jpg?raw=true",
			"dependencies": [
				"python 2.7 or 3.6",
				"pytescomobileirl"
			],
			"aboutURL": "https://github.com/skhg/BitBar-Plugins/tree/master/TescoMobileIrl",
			"lastUpdated": "2021-03-08T15:21:56.304789Z",
			"vars": null
		},
		{
			"files": [
				{
					"path": "Network/netstats.5s.sh",
					"filename": "netstats.5s.sh",
					"content": "#!/bin/bash\n\n# \u003cbitbar.title\u003eIP Address Info\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eJack Higgins\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003eskhg\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eDisplays your local IP address with useful extra info\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttps://raw.githubusercontent.com/skhg/BitBar-Plugins/master/NetworkInfo/ip_info.jpg\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003e\u003c/bitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttps://github.com/skhg/BitBar-Plugins/tree/master/NetworkInfo\u003c/bitbar.abouturl\u003e\n\n\n\n\n\n# When the connection to the router drops below this speed (Mbps)\n# your IP address will be highlighted in orange\n\nWARNING_SPEED=20\n\n\n\n\n\n\n\n\n\n\n\n# You don't need to change anything below here...\n\nLOCAL_IP=$(ipconfig getifaddr en0 2\u003e\u00261)\nLOCAL_OK=$?\n\nif [ $LOCAL_OK != 0 ] ; then\n    LOCAL_PART=\"❌\"\n    ROUTER_PART=\"❌ - Router | font=Courier\"\nelse\n    LOCAL_PART=$LOCAL_IP\n\n    ROUTER=$(netstat -nr | grep default | grep -E -o '\\d+\\.\\d+\\.\\d+\\.\\d+' 2\u003e\u00261)\n    ROUTER_OK=$?\n\n    if [ $ROUTER_OK != 0 ] ; then\n        ROUTER_PART=\"Unable to determine router IP? | color=orange font=Courier\"\n    else\n        ROUTER_PART=\"$ROUTER\"\" - Router | font=Courier\"\n    fi\nfi\n\nREMOTE_IP=$(dig +short myip.opendns.com @resolver1.opendns.com 2\u003e\u00261)\n# Alternatively, you can use:\n# REMOTE_IP=$(curl ifconfig.me 2\u003e\u00261)\n\nREMOTE_OK=$?\n\nif [ $REMOTE_OK != 0 ] ; then\n    REMOTE_PART=\"❌\"\nelse\n    REMOTE_PART=\"$REMOTE_IP\"\nfi\n\nSPEED=$(/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I | grep 'lastTxRate:' | grep -o '\\d\\+' 2\u003e\u00261)\n\nif [ $LOCAL_OK != 0 ] ; then\n    SPEED_PART=\"❌\"\n    SPEED_WARNING=0\nelse\n    SPEED_PART=\"$SPEED\"\"Mbps\"\n\n    if [ \"$SPEED\" -lt $WARNING_SPEED ] ; then\n        SPEED_WARNING=1\n    else\n        SPEED_WARNING=0\n    fi\nfi\n\n\n\nif [ $REMOTE_OK != 0 ] ; then\n    REMOTE_WARNING=1\nelse\n    REMOTE_WARNING=0\nfi\n\nfunction speedcolour {\n    SPEED=$1\n\n    if [ \"$SPEED\" == 1 ] ; then\n        echo \" color=orange\"\n        return\n    fi\n\n    echo \"\"\n}\n\nfunction wancolour {\n    WAN=$1\n\n    if [ \"$WAN\" == 1 ] ; then\n        echo \" color=red\"\n        return\n    fi\n\n    echo \"\"\n}\n\nfunction topcolour {\n    SPEED=$1\n    WAN=$2\n\n    if [ \"$WAN\" == 1 ] ; then\n        wancolour \"$WAN\"\n        return\n    fi\n\n    if [ \"$SPEED\" == 1 ] ; then\n        speedcolour \"$SPEED\"\n        return\n    fi\n\n    echo \"\"\n}\n\necho \"$LOCAL_PART | $(topcolour $SPEED_WARNING $REMOTE_WARNING) font=Courier\"\n\necho \"---\"\n\necho \"$LOCAL_PART - Local | font=Courier\"\necho \"$ROUTER_PART\"\necho \"$SPEED_PART - LAN Speed | $(speedcolour $SPEED_WARNING) font=Courier\"\necho \"$REMOTE_PART - WAN | $(wancolour $REMOTE_WARNING) font=Courier\"\n\necho \"---\"\n\necho \"Terminal: ifconfig| bash='ifconfig'\"\necho \"Terminal: Adapter Info| bash='/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I'\"\necho \"Terminal: Wireless Scan| bash='/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -s''\"\n\necho \"---\"\n\necho \"Router Web Config | href=http://$ROUTER_PART\"\n"
				}
			],
			"path": "Network/netstats.5s.sh",
			"filename": "netstats.5s.sh",
			"dir": "Network",
			"docsPlugin": "Network/netstats.5s.sh.html",
			"docsCategory": "Network.html",
			"pathSegments": [
				"Network"
			],
			"categoryPathSegments": [
				{
					"path": "Network",
					"text": "Network",
					"isLast": true
				}
			],
			"title": "IP Address Info",
			"version": "v1.0",
			"author": "Jack Higgins",
			"authors": [
				{
					"name": "Jack Higgins",
					"githubUsername": "skhg",
					"imageURL": "https://avatars.githubusercontent.com/u/1479627?v=4",
					"bio": "Product Manager and Software Engineer",
					"primary": true
				}
			],
			"desc": "Displays your local IP address with useful extra info",
			"imageURL": "https://raw.githubusercontent.com/skhg/BitBar-Plugins/master/NetworkInfo/ip_info.jpg",
			"dependencies": [],
			"aboutURL": "https://github.com/skhg/BitBar-Plugins/tree/master/NetworkInfo",
			"lastUpdated": "2021-03-08T15:21:59.166689Z",
			"vars": null
		},
		{
			"files": [
				{
					"path": "Travel/leapcard.1h.py",
					"filename": "leapcard.1h.py",
					"content": "#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n# \u003cbitbar.title\u003eLeap Card Balance\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.2.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eJack Higgins\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003eskhg\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eDisplays your current Leap Card balance along with any recent card events.\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttps://github.com/skhg/BitBar-Plugins/blob/master/LeapCard/leapcard.jpg?raw=true\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003epython 2 or 3, pyleapcard, lxml\u003c/bitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttps://github.com/skhg/BitBar-Plugins/tree/master/LeapCard\u003c/bitbar.abouturl\u003e\n\n\n\n\n\n\n\n# START USER DETAILS\n\n# Enter your leapcard.ie login details here. These are sent only to the leap card\n# website and never stored or transmitted anywhere else.\n\nleap_user = \"MyUserName\"\nleap_pass = \"MyPassword\"\n\n# END USER DETAILS\n\n\n\n\n\nfrom sys import exit\n\n# VERIFY DEPENDENCIES\ntry:\n    from pyleapcard import LeapSession\nexcept ImportError:\n    print(\"Leap Card\")\n    print(\"---\")\n    print(\"Looks like the package 'pyleapcard' isn't installed.\")\n    print(\"You need it to run this tool. To install, click 'Install Now',\")\n    print(\"then click 'Preferences' -\u003e 'Refresh All...'\")\n    print(\"Install Now. | bash='sudo /usr/local/bin/pip install pyleapcard'\")\n    exit()\n\n\n\n# START APP\n\nimport pickle\nimport os\nimport subprocess\nimport sys\n\nclass StateMgmt:\n    \n    def __init__(self):\n        os.chdir(self.get_bitbar_plugins_dir())\n        self.relative_state_dir = \"./.leapcard_state/\"\n        self.state_dump_file = self.relative_state_dir+\"leapcard_last_state.pickle\"\n\n    def get_bitbar_plugins_dir(self):\n        bitbar_defaults = subprocess.check_output([\"defaults\", \"read\", \"com.matryer.BitBar\"]).split(\";\")\n        for entry in bitbar_defaults:\n            if \"pluginsDirectory\" in entry:\n                return entry.split(\"\\\"\")[1]\n\n        raise IOError(\"BitBar plugins directory could not be found\")\n    \n    def check_state_dir_exists(self, state_dir):\n        if os.path.exists(state_dir) is False:\n            os.mkdir(state_dir)\n    \n    def load_state(self):\n        self.check_state_dir_exists(self.relative_state_dir)\n\n        if os.path.exists(self.state_dump_file) is False:\n            return None\n        else:\n            try:\n                with open(self.state_dump_file,\"r\") as f_read:\n                    return pickle.load(f_read)\n            except:\n                return None\n    \n    def dump_state(self, card_state,events_state):\n        self.check_state_dir_exists(self.relative_state_dir)\n\n        current_state = [card_state,events_state]\n\n        with open(self.state_dump_file,\"w\") as f_write:\n            pickle.dump(current_state,f_write)\n\nclass ResultsFormatter:\n    \n    def euro_value_to_str(self, value, highlightNegative=False):\n        balance_string =u\"\"\n        negative_balance = False\n\n        if value \u003c 0:\n            balance_string = u\"- \"\n            negative_balance = True\n\n        balance_string += u'€{:,.2f}'.format(abs(value))\n\n        if negative_balance and highlightNegative:\n            balance_string += \" | color=orange\"\n\n        return balance_string\n    \n    def format_card_event(self, event):\n        styleInfo = \" | font=Courier\"\n\n        if event.was_topup is True:\n            styleInfo += \" color=green\"\n\n        euroVal = self.euro_value_to_str(event.price).encode(\"utf-8\")\n        start = event.date + \" \" + event.time + \" (\" + event.provider + \") \"\n\n        return start.encode(\"utf-8\") + euroVal + styleInfo.encode(\"utf-8\")\n    \n    def print_output(self, card, events, is_live, login_url):\n        print(self.euro_value_to_str(card.balance,True).encode(\"utf-8\"))\n        print(\"---\")\n        if is_live is False:\n            print(\"❌ : Using cached data, last update failed\")\n            print(\"---\")\n\n        print(card.card_num+\" (\" + card.card_label + \")\".encode())\n        print(\"---\")\n        print(\"Recent Events\")\n        for e in events:\n            print(self.format_card_event(e))\n        print(\"---\")\n\n        print(\"leapcard.ie | href=\"+login_url)\n    \n    def print_error_message(self, details, login_url):\n        print(\"❌\")\n        print(\"---\")\n        print(\"Error: Unable to retrieve Leap Card state.\")\n        print(\"---\")\n\n        print(\"leapcard.ie | href=\"+login_url)\n\ndef run():\n    login_ok= False\n    login_error = \"\"\n\n    session = LeapSession()\n\n    try:\n        login_ok = session.try_login(leap_user, leap_pass)\n    except Exception:\n        login_error = sys.exc_info()[0]\n\n    state = StateMgmt()\n    formatter = ResultsFormatter()\n\n    if login_ok:\n        card = session.get_card_overview()\n        events = session.get_events()\n        \n        state.dump_state(card,events)\n        formatter.print_output(card,events,True, session.login_url())\n    else:\n        loaded_state = state.load_state()\n        if loaded_state is not None:\n            formatter.print_output(loaded_state[0],loaded_state[1],False, session.login_url())\n        else:\n            formatter.print_error_message(login_error, session.login_url())\n\nrun()\n"
				}
			],
			"path": "Travel/leapcard.1h.py",
			"filename": "leapcard.1h.py",
			"dir": "Travel",
			"docsPlugin": "Travel/leapcard.1h.py.html",
			"docsCategory": "Travel.html",
			"pathSegments": [
				"Travel"
			],
			"categoryPathSegments": [
				{
					"path": "Travel",
					"text": "Travel",
					"isLast": true
				}
			],
			"title": "Leap Card Balance",
			"version": "v1.2.0",
			"author": "Jack Higgins",
			"authors": [
				{
					"name": "Jack Higgins",
					"githubUsername": "skhg",
					"imageURL": "https://avatars.githubusercontent.com/u/1479627?v=4",
					"bio": "Product Manager and Software Engineer",
					"primary": true
				}
			],
			"desc": "Displays your current Leap Card balance along with any recent card events.",
			"imageURL": "https://github.com/skhg/BitBar-Plugins/blob/master/LeapCard/leapcard.jpg?raw=true",
			"dependencies": [
				"python 2 or 3",
				"pyleapcard",
				"lxml"
			],
			"aboutURL": "https://github.com/skhg/BitBar-Plugins/tree/master/LeapCard",
			"lastUpdated": "2021-03-08T15:22:08.320412Z",
			"vars": null
		}
	]
}