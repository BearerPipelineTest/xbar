{
	"plugin": {
		"files": [
			{
				"path": "Cryptocurrency/Bitcoin/coinbase.com/balance.1h.sh",
				"filename": "balance.1h.sh",
				"content": "#!/bin/bash\n# \u003cbitbar.title\u003eCoinbase.com Your Balance\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.1\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eMat Ryer\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003ematryer\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eShows your balance in BTC.  Be sure you add your API \u0026 account details.\u003c/bitbar.desc\u003e\n\nAPI_KEY=\"YOUR_API_KEY\"\nAPI_SECRET=\"YOUR_API_SECRET\"\nACCOUNT_ID=\"YOUR_ACCOUNT_ID\"\nAPI_VERSION=\"2017-08-07\" # You'll need to verify this in your Account Details\n\nREQUEST_METHOD=\"GET\"\nREQUEST_URL=\"https://api.coinbase.com\"\nREQUEST_PATH=\"/v2/accounts/${ACCOUNT_ID}\"\n\nTIMESTAMP=$(date +%s)\nSIGNATURE=$(echo -n \"${TIMESTAMP}${REQUEST_METHOD}${REQUEST_PATH}\" | openssl dgst -sha256 -hmac \"${API_SECRET}\")\n\nBTC_BALANCE=$(curl -s ${REQUEST_URL}${REQUEST_PATH} \\\n  --request ${REQUEST_METHOD} \\\n  --header \"CB-VERSION: ${API_VERSION}\" \\\n  --header \"CB-ACCESS-KEY: ${API_KEY}\" \\\n  --header \"CB-ACCESS-SIGN: ${SIGNATURE}\" \\\n  --header \"CB-ACCESS-TIMESTAMP: ${TIMESTAMP}\" | jq -r \".data.balance.amount\")\n\nLAST_BTC_RATE=$(cat ~/.bitbar_last_btc_rate)\nLAST_USD_BALANCE=$(cat ~/.bitbar_last_usd_balance)\n\nBTC_RATE=$(curl -s https://api.coinbase.com/v2/prices/BTC-USD/spot | jq -r '.data.amount')\nUSD_BALANCE=$(echo \"$BTC_BALANCE * $BTC_RATE\" | bc)\n\nDELTA_USD=$(printf \"%.2f\" \"$(echo \"$USD_BALANCE-${LAST_USD_BALANCE:-0}\" | bc)\")\nDELTA_BTC=$(printf \"%.2f\" \"$(echo \"$BTC_RATE-${LAST_BTC_RATE:-0}\" | bc)\")\n\nif [ \"$(echo \"$DELTA_BTC \u003e 0.00\" | bc)\" -eq \"1\" ]; then\n  HIDE_DELTA=0\n  CHG_SYMBOL=\"▲ \"\n  COLOR=green\nelif [ \"$(echo \"$DELTA_BTC \u003c 0.00\" | bc)\" -eq \"1\" ]; then\n  HIDE_DELTA=0\n  CHG_SYMBOL=\"▼ \"\n  COLOR=red\n  DELTA_BTC=${DELTA_BTC#-}\n  DELTA_USD=${DELTA_USD#-}\nelse\n  HIDE_DELTA=1\nfi\n\necho -n \"$BTC_RATE\" \u003e ~/.bitbar_last_btc_rate\necho -n \"$USD_BALANCE\" \u003e ~/.bitbar_last_usd_balance\n\nif [ \"$HIDE_DELTA\" -eq \"1\" ]; then\n  printf \"Ƀ%.2f\\n\" \"${BTC_RATE}\"\n  printf \"$%.2f\\n\" \"${USD_BALANCE}\"\nelse\n  printf \"Ƀ%.2f (${CHG_SYMBOL}%.2f) | color=$COLOR\\n\" \"${BTC_RATE}\" \"${DELTA_BTC}\"\n  printf \"$%.2f (${CHG_SYMBOL}%.2f) | color=$COLOR\\n\" \"${USD_BALANCE}\" \"${DELTA_USD}\"\nfi\necho \"---\"\nprintf \"Balance: %f (%.2f)\" \"${BTC_BALANCE}\" \"${USD_BALANCE}\"\n"
			}
		],
		"path": "Cryptocurrency/Bitcoin/coinbase.com/balance.1h.sh",
		"filename": "balance.1h.sh",
		"dir": "Cryptocurrency/Bitcoin/coinbase.com",
		"docsPlugin": "Cryptocurrency/Bitcoin/coinbase.com/balance.1h.sh.html",
		"docsCategory": "Cryptocurrency/Bitcoin/coinbase.com.html",
		"pathSegments": [
			"Cryptocurrency",
			"Bitcoin",
			"coinbase.com"
		],
		"categoryPathSegments": [
			{
				"path": "Cryptocurrency",
				"text": "Cryptocurrency",
				"isLast": false
			},
			{
				"path": "Cryptocurrency/Bitcoin",
				"text": "Bitcoin",
				"isLast": false
			},
			{
				"path": "Cryptocurrency/Bitcoin/coinbase.com",
				"text": "coinbase.com",
				"isLast": true
			}
		],
		"title": "Coinbase.com Your Balance",
		"version": "v1.1",
		"author": "Mat Ryer",
		"authors": [
			{
				"name": "Mat Ryer",
				"githubUsername": "matryer",
				"imageURL": "https://avatars.githubusercontent.com/u/101659?v=4",
				"bio": "Building pace.dev and firesearch.dev - Gopher, developer, speaker, author (Go Programming Blueprints) - BitBar app getbitbar.com - Co-creator Gopherize.me",
				"primary": true
			}
		],
		"desc": "Shows your balance in BTC.  Be sure you add your API \u0026 account details.",
		"imageURL": "https://xbarapp.com/public/img/xbar-2048.png",
		"dependencies": null,
		"aboutURL": "",
		"lastUpdated": "2021-03-08T15:21:45.110128Z",
		"vars": null
	}
}