{
	"plugin": {
		"files": [
			{
				"path": "Dev/Jenkins/jenkins-multiple-projects-status.1m.sh",
				"filename": "jenkins-multiple-projects-status.1m.sh",
				"content": "#!/bin/bash\n# \u003cbitbar.title\u003eMultiple Jenkins Status\u003c/bitbar.title\u003e\n# \u003cbitbar.desc\u003eCheck status of multiple Jenkins projects\u003c/bitbar.desc\u003e\n# \u003cbitbar.author\u003eNocolas Roger\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003enicolasroger17\u003c/bitbar.author.github\u003e\n# \u003cbitbar.version\u003e1\u003c/bitbar.version\u003e\n\n\nSCHEMA=\"https\"\nBASE_URL=\"jenkins-address.com\"\nUSER=\"username\"\nTOKEN=\"token\" #prefer tokens to passwords (passwords can still be used here), get it from $SCHEMA://$BASE_URL/user/$USER/configure -\u003e Show API Token\nPROJECTS=(\"project1\" \"project2\")\n\nfunction displaytime {\n  local T=$1/1000\n  local D=$((T/60/60/24))\n  local H=$((T/60/60%24))\n  local M=$((T/60%60))\n  local S=$((T%60))\n  local output=\"\"\n\n  if [[ $D -gt 0  || $H -gt 0 || $M -gt 10 ]]\n  then\n    output+=\"\u003e10mn\"\n  else\n    output+=\"${M}mn ${S}s\"\n  fi\n\n  echo \"${output} ago\"\n}\n\n# beginning of display\necho \"Jenkins Status\"\necho \"---\"\n\nfor project in \"${PROJECTS[@]}\"\ndo\n  output=\"${project}: \"\n  url=\"${SCHEMA}://${USER}:${TOKEN}@${BASE_URL}/job/${project// /'%20'}/lastBuild/api/json?pretty=true\"\n  query=$(curl --insecure --silent \"${url}\")\n\n  success=$(echo \"${query}\" | grep '\"result\"' | awk '{print $3}') # grep the \"result\" line\n\n  if [[ $success == *\"SUCCESS\"* ]]\n  then\n    output+='ðŸ”µ '\n  else\n    output+='ðŸ”´ '\n  fi\n\n  timestamp=$(echo \"${query}\" | grep \"timestamp\" | awk '{print $3}') # grep the \"timestamp\" line\n  timestamp=${timestamp%?} # remove the trailing ','\n  currentTime=$(($(date +'%s * 1000 + %-N / 1000000'))) # generate a timestamp\n  output+=\" $(displaytime $(( currentTime - timestamp )))\"\n  echo \"${output}\"\ndone\n"
			}
		],
		"path": "Dev/Jenkins/jenkins-multiple-projects-status.1m.sh",
		"filename": "jenkins-multiple-projects-status.1m.sh",
		"dir": "Dev/Jenkins",
		"docsPlugin": "Dev/Jenkins/jenkins-multiple-projects-status.1m.sh.html",
		"docsCategory": "Dev/Jenkins.html",
		"pathSegments": [
			"Dev",
			"Jenkins"
		],
		"categoryPathSegments": [
			{
				"path": "Dev",
				"text": "Dev",
				"isLast": false
			},
			{
				"path": "Dev/Jenkins",
				"text": "Jenkins",
				"isLast": true
			}
		],
		"title": "Multiple Jenkins Status",
		"version": "1",
		"author": "Nocolas Roger",
		"authors": [
			{
				"name": "Nicolas",
				"githubUsername": "nicolasroger17",
				"imageURL": "https://avatars.githubusercontent.com/u/3426302?v=4",
				"bio": "",
				"primary": true
			}
		],
		"desc": "Check status of multiple Jenkins projects",
		"imageURL": "https://xbarapp.com/public/img/xbar-2048.png",
		"dependencies": null,
		"aboutURL": "",
		"lastUpdated": "2021-03-08T15:21:49.465561Z",
		"vars": null
	}
}