{
	"plugin": {
		"files": [
			{
				"path": "Dev/Kubernetes/kubecontext.1s.py",
				"filename": "kubecontext.1s.py",
				"content": "#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n# \u003cbitbar.title\u003eKubeconfig Context Changer\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eChris Opland\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003ecopland\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eDisplays active kubeconfig context and allows you to easily change contexts.\u003c/bitbar.desc\u003e\n# \u003cbitbar.dependencies\u003epython,kubectl\u003c/bitbar.dependencies\u003e\n\nfrom collections import namedtuple\nfrom distutils import spawn\nimport os\nimport subprocess\n\nContext = namedtuple('Context', ['name', 'active'])\n\nos.environ['PATH'] = '/usr/local/bin:/usr/bin:%s' % os.getenv('PATH')\nKUBECTL_PATH = spawn.find_executable('kubectl')\n\n\ndef get_active(contexts):\n    return next((x for x in contexts if x.active), 'CONTEXT_NOT_SET')\n\n\ndef load_contexts():\n    cmd = [\n        KUBECTL_PATH,\n        'config',\n        'get-contexts',\n        '--no-headers'\n    ]\n    out = subprocess.check_output(cmd)\n    lines = out.split('\\n')\n    contexts = []\n    for line in lines:\n        columns = line.split()\n        if columns == []:\n            continue\n        elif columns[0] == \"*\":\n            contexts.append(Context(columns[1], True))\n        else:\n            contexts.append(Context(columns[0], False))\n    return contexts\n\n\ndef display(contexts):\n    active = get_active(contexts)\n    print(active.name)\n    print('---')\n    for context in sorted(contexts, key=lambda x: x.name):\n        vardict = {\n            'context': context.name,\n            'kubectl': KUBECTL_PATH\n        }\n        print(\"{context} | bash={kubectl} param1=config param2=use-context param3={context} terminal=false\".format(**vardict))\n\n\nif __name__ == '__main__':\n    CONTEXTS = load_contexts()\n    display(CONTEXTS)\n"
			}
		],
		"path": "Dev/Kubernetes/kubecontext.1s.py",
		"filename": "kubecontext.1s.py",
		"dir": "Dev/Kubernetes",
		"docsPlugin": "Dev/Kubernetes/kubecontext.1s.py.html",
		"docsCategory": "Dev/Kubernetes.html",
		"pathSegments": [
			"Dev",
			"Kubernetes"
		],
		"categoryPathSegments": [
			{
				"path": "Dev",
				"text": "Dev",
				"isLast": false
			},
			{
				"path": "Dev/Kubernetes",
				"text": "Kubernetes",
				"isLast": true
			}
		],
		"title": "Kubeconfig Context Changer",
		"version": "v1.0",
		"author": "Chris Opland",
		"authors": [
			{
				"name": "Chris Opland",
				"githubUsername": "copland",
				"imageURL": "https://avatars.githubusercontent.com/u/1004715?v=4",
				"bio": "",
				"primary": true
			}
		],
		"desc": "Displays active kubeconfig context and allows you to easily change contexts.",
		"imageURL": "https://xbarapp.com/public/img/xbar-2048.png",
		"dependencies": [
			"python",
			"kubectl"
		],
		"aboutURL": "",
		"lastUpdated": "2021-03-08T15:21:49.715174Z",
		"vars": null
	}
}