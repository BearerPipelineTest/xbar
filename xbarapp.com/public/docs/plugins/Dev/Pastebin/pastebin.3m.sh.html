
<!doctype html>
<html lang='en' style='background: #111;'>
	<head>
		<meta charset='utf-8' />
		<meta name='viewport' content='width=device-width' />
		<meta http-equiv='X-UA-Compatible' content='ie=edge'>
		<title>Check Pastebin in your macOS menu bar</title>
		<link rel='stylesheet' href='/public/css/xbar.css?cb=08%20Mar%2021%2015%3a22%20GMT'>
		<link rel='preconnect' href='https://fonts.gstatic.com'>
		<link rel='preconnect' href='https://fonts.googleapis.com'>
		<link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@500&display=swap'>
		
	<meta name='description' content='Uses a set of Pastebin API keys to check for pastes created by the user. It will provide links to all the pastes it finds by the user.  - install xbar for free to get started.'>
	<meta name='author' content='Tyllis Xu'>
	<meta name='keywords' content='macos,menubar,xbar,bitbar'>
	<meta itemprop='image' content='https://i.ibb.co/cym797V/Pastebin2.png'>
	<meta itemprop='name' content='Check Pastebin in your macOS menu bar'>
	<meta itemprop='description' content='Uses a set of Pastebin API keys to check for pastes created by the user. It will provide links to all the pastes it finds by the user.  - install xbar for free to get started.'>
	<meta name='twitter:card' content='summary_large_image'>
	<meta name='twitter:title' content='Check Pastebin in your macOS menu bar'>
	<meta name='twitter:description' content='Uses a set of Pastebin API keys to check for pastes created by the user. It will provide links to all the pastes it finds by the user.  - install xbar for free to get started.'>
	<meta name='twitter:image' content='https://i.ibb.co/cym797V/Pastebin2.png'>
	<meta name='twitter:creator' content='matryer'>
	<meta property='og:title' content='Check Pastebin in your macOS menu bar'>
	<meta property='og:description' content='Uses a set of Pastebin API keys to check for pastes created by the user. It will provide links to all the pastes it finds by the user.  - install xbar for free to get started.'>
	<meta property='og:url' content='https://xbarapp.com/plugins/Dev/Pastebin/pastebin.3m.sh.html'>
	<meta property='og:site_name' content='xbar lets you put anything into your macOS menu bar'>
	<meta property='og:type' content='article'>
	<meta property='og:image' content='https://i.ibb.co/cym797V/Pastebin2.png'>
	<link rel='apple-touch-icon' sizes='180x180' href='https://i.ibb.co/cym797V/Pastebin2.png'>
	<link rel='icon' type='image/png' sizes='32x32' href='https://i.ibb.co/cym797V/Pastebin2.png'>
	<link rel='shortcut icon' href='https://i.ibb.co/cym797V/Pastebin2.png'>
	<meta name='msapplication-TileColor' content='#ffffff'>
	<meta name='msapplication-config' content='/public/browserconfig.xml'>
	<meta name='theme-color' content='#ffffff'>
	<style>
		.code-background {
			background: rgb(255,255,255);
			background: linear-gradient(to right, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 100%);
		}
		.plugin-app-link {
			margin-left: -32px;
		}
	</style>

	</head>
	<body>
		<header class='flex flex-col'>
			<div class='container mx-auto'>
				<div class='flex items-center space-x-8 p-8 text-white'>
					<a href='/' class='inline-block py-2 text-2xl flex items-center space-x-2 font-bold'>
						<img alt='xbar logo: a circle with three dots inside it' src='/public/img/xbar-2048.png' style='width:48px;height:48px;' />
						<span>xbar</span>
					</a>
					<div class='flex-grow'></div>
					<div>
						<a 
							target='github'
							href='https://github.com/sponsors/matryer' 
							class='text-white px-4 py-2 whitespace-nowrap'
						><span class='mr-1'>ðŸ’œ</span> Sponsor</a>
					</div>
					<div class='hidden md:block'>
						<a 
							target='github'
							href='/dl' 
							class='rounded bg-white text-gray-800 hover:text-black px-4 py-2 shadow hover:shadow-lg whitespace-nowrap'
						>Coming soon</a>
					</div>
				</div>
			</div>
		</header>
		<div id='menubar' class='text-white whitespace-nowrap overflow-hidden flex flex-wrap justify-end items-center text-right'>
			
			
				<a 
					
					href='/docs/plugins/AWS.html'
				>
					AWS
				</a>
			
				<a 
					
					href='/docs/plugins/Cryptocurrency.html'
				>
					Cryptocurrency
				</a>
			
				<a 
					 class='rounded selected' 
					href='/docs/plugins/Dev.html'
				>
					Dev
				</a>
			
				<a 
					
					href='/docs/plugins/E-Commerce.html'
				>
					E-Commerce
				</a>
			
				<a 
					
					href='/docs/plugins/Email.html'
				>
					Email
				</a>
			
				<a 
					
					href='/docs/plugins/Environment.html'
				>
					Environment
				</a>
			
				<a 
					
					href='/docs/plugins/Finance.html'
				>
					Finance
				</a>
			
				<a 
					
					href='/docs/plugins/Games.html'
				>
					Games
				</a>
			
				<a 
					
					href='/docs/plugins/IoT.html'
				>
					IoT
				</a>
			
				<a 
					
					href='/docs/plugins/Lifestyle.html'
				>
					Lifestyle
				</a>
			
				<a 
					
					href='/docs/plugins/Music.html'
				>
					Music
				</a>
			
				<a 
					
					href='/docs/plugins/Network.html'
				>
					Network
				</a>
			
				<a 
					
					href='/docs/plugins/Politics.html'
				>
					Politics
				</a>
			
				<a 
					
					href='/docs/plugins/Science.html'
				>
					Science
				</a>
			
				<a 
					
					href='/docs/plugins/Sports.html'
				>
					Sports
				</a>
			
				<a 
					
					href='/docs/plugins/System.html'
				>
					System
				</a>
			
				<a 
					
					href='/docs/plugins/Time.html'
				>
					Time
				</a>
			
				<a 
					
					href='/docs/plugins/Tools.html'
				>
					Tools
				</a>
			
				<a 
					
					href='/docs/plugins/Travel.html'
				>
					Travel
				</a>
			
				<a 
					
					href='/docs/plugins/Weather.html'
				>
					Weather
				</a>
			
				<a 
					
					href='/docs/plugins/Web.html'
				>
					Web
				</a>
			
		</div>
		
	<div class='container mx-auto flex flex-wrap space-x-8 justify-start items-start mt-16'>
		<div class='flex flex-col justify-start'>
			<div class='px-8 py-2 max-w-3xl'>
				<h1 class='fancy-font text-white text-6xl'>Check Pastebin</h1>
			</div>
			<div class='p-8 text-sm'>
				
					
						
							<div class='flex space-x-4 pb-8'>
								<div class='tiny-photo'>
									<a 
										href='/docs/contributors/livelycarpet87.html'
									>
										<img class='rounded shadow primary' src='https://avatars.githubusercontent.com/u/46377494?v=4'>
									</a>
								</div>
								<div>
									<a 
										href='/docs/contributors/livelycarpet87.html'
										class='light-background rounded-sm shadow-md px-4 py-2 text-white' 
										style='text-decoration: none;'
									>
										Tyllis Xu (<code style='color:white;'>@livelycarpet87</code> on GitHub)
									</a>
								</div>
							</div>
						
					
				
				
					<p class='my-8 text-white opacity-75 text-lg max-w-lg'>
						Uses a set of Pastebin API keys to check for pastes created by the user. It will provide links to all the pastes it finds by the user. 
					</p>
				
				<div class='plugin-app-link hidden md:flex items-end p-8 m-8 mb-16 bg-black bg-opacity-25 rounded-lg shadow max-w-md'>
					<div>
						<a 
							href='xbar://app.xbarapp.com/openPlugin?path=Dev%2fPastebin%2fpastebin.3m.sh'
							class='rounded bg-white text-gray-800 hover:text-black px-4 py-2 shadow hover:shadow-lg whitespace-nowrap'
						><span class='mr-1'>ðŸ–¥</span> Open in xbar app</a>
					</div>
					<div class='opacity-50 text-sm text-white ml-3'>Requires <a target='github' href='/dl' class='underline'>xbar app</a></div>
				</div>
				
			</div>
		</div>
		<div 
			class='flex flex-col justify-center mb-16'
		>
			<img 
				class='max-w-md w-full'
				src='https://i.ibb.co/cym797V/Pastebin2.png' 
				alt='Image preview of Check Pastebin plugin.'
				onerror='this.onerror=null;this.src="/public/img/xbar-2048.png";'
			/>
		</div>
	</div>

	
		<div class='code-background text-white p-8 pb-24'>
			<div class='container mx-auto'>
				<div class='flex flex-wrap py-8 space-x-4 justify-end'>
					<div>
						<h2 class='md:text-2xl text-bold'>
							<code>pastebin.3m.sh</code>
						</h2>
					</div>
					<div class='flex-grow'></div>
					<div>
						<a class='text-sm text-white hover:text-black hover:bg-white px-4 py-2 rounded' target='github' href='https://github.com/matryer/bitbar-plugins/edit/master/Dev/Pastebin/pastebin.3m.sh'>Edit</a>
					</div>
					<div>
						<a class='text-sm text-gray-700 bg-white hover:bg-gray-100 active:text-black px-4 py-2 rounded' target='github' href='https://github.com/matryer/bitbar-plugins/blob/master/Dev/Pastebin/pastebin.3m.sh'>Open on GitHub</a>
					</div>
				</div>
				<div>
					<pre class='text-sm whitespace-pre-wrap'><code class='break-all '>#!/bin/bash

#
# &lt;bitbar.title&gt;Check Pastebin&lt;/bitbar.title&gt;
# &lt;bitbar.version&gt;v1.2&lt;/bitbar.version&gt;
# &lt;bitbar.author&gt;Tyllis Xu&lt;/bitbar.author&gt;
# &lt;bitbar.author.github&gt;livelycarpet87&lt;/bitbar.author.github&gt;
# &lt;bitbar.desc&gt;Uses a set of Pastebin API keys to check for pastes created by the user. It will provide links to all the pastes it finds by the user. &lt;/bitbar.desc&gt;
# &lt;bitbar.image&gt;https://i.ibb.co/cym797V/Pastebin2.png&lt;/bitbar.image&gt;
# &lt;bitbar.abouturl&gt;https://github.com/LivelyCarpet87/BitBar-Pastebin#bitbar-pastebin&lt;/bitbar.abouturl&gt;
#

#Requires Configuration Here

#Pastebin developer key
dev_key=&#34;&#34;

#Pastebin user key
usr_key=&#34;&#34;

#Save-To Directory
#Saved pastes will be saved to this directory
saveDir=&#34;&#34;

#Enable Deletion of pastes
# 0=disabled | 1=enabled
deleteEnabled=1

#End Configuration

#Constants
#Pastebin API List Paste URL
list_paste_url=&#34;https://pastebin.com/api/api_post.php&#34;
#Pastebin API Get Paste URL
get_paste_url=&#34;https://pastebin.com/api/api_raw.php&#34;


#empty pastes arrays
pasteNameArr=()
pasteKeyArr=()

#Initialize the temp directory if it does not exist
if [ ! -d /tmp/pastebinReader ]
then
mkdir /tmp/pastebinReader
fi

#clear the temp directory
rm -f /tmp/pastebinReader/*


#get a list of all the pastes

queryResults=$(curl --silent --connect-timeout 15 --speed-time 15 --speed-limit 500  -X POST -d &#34;api_option=list&amp;api_user_key=$usr_key&amp;api_dev_key=$dev_key&#34; $list_paste_url)

#parse the paste titles and keys

titles=$(echo &#34;$queryResults&#34; | grep -E &#34;&lt;paste_title&gt;([^\r]*)&#34; --context=0 | sed s&#43;&#39;&lt;paste_title&gt;&lt;/paste_title&gt;&#39;&#43;Untitled&#43;g | sed s&#43;\&lt;paste_title\&gt;&#43;&#43;g | sed s&#43;&#39;&lt;/paste_title&gt;&#39;&#43;&#43;g |tr &#39;\r&#39; &#39; &#39;)

pasteURLs=$(echo &#34;$queryResults&#34; | grep -E &#34;&lt;paste_key&gt;(\S*)&lt;/paste_key&gt;&#34; --context=0 | sed s&#43;\&lt;paste_key\&gt;&#43;&#43;g | sed s&#43;&#39;&lt;/paste_key&gt;&#39;&#43;&#43;g |tr &#39;\r&#39; &#39; &#39;)

SAVEIFS=$IFS
IFS=$&#39;\n\r&#39;
#shellcheck disable=SC2206
pasteNameArr=($titles)
#shellcheck disable=SC2206
pasteKeyArr=($pasteURLs)
IFS=$SAVEIFS

totalPastes=$((${#pasteNameArr[@]}))



# test if the request response was valid
if [[ $(echo &#34;$queryResults&#34; | grep &#34;paste&#34; -c) -gt 0 || $(echo &#34;$queryResults&#34; | grep &#34;No pastes found&#34; -c) == 1 ]]
then

echo &#34;Found: $totalPastes&#34;

i=0
while [[ $i &lt; $totalPastes ]]
do
printf &#39;%s\n&#39; &#34;$((i &#43; 1)): ${pasteNameArr[$i]} | length=7 dropdown=false&#34;
i=$((i &#43; 1))
done

echo &#34;---&#34;
i=0
while [[ $i &lt; $totalPastes ]]
do
#print paste title
printf &#39;%s\n&#39; &#34;$((i &#43; 1)): ${pasteNameArr[$i]} |href=https://pastebin.com/${pasteKeyArr[$i]}&#34;

#get and display paste content with slight modifications to prevent breaking Bitbar display
pasteContent=&#34;$(curl --silent -X POST --connect-timeout 15 --speed-time 15 --speed-limit 500 -d &#34;api_option=show_paste&amp;api_user_key=$usr_key&amp;api_dev_key=$dev_key&amp;api_paste_key=${pasteKeyArr[$i]}&#34;  $get_paste_url)&#34;

echo &#34;-- $(echo &#34;$pasteContent&#34; | tr &#39;\n&#39; &#39;$&#39; |  tr &#39;\r&#39; &#39;$&#39; | sed &#39;s/\$\$/; /g&#39; | sed &#39;s/;;/; /g&#39;)&#34;

#save paste contents temporarily until next refresh

fname=$(echo &#34;${pasteNameArr[$i]}_${pasteKeyArr[$i]}&#34;| tr &#39; &#39; &#39;_&#39;| tr &#39;&#39; &#39;_&#39;| tr &#39;#&#39; &#39;H&#39;|tr &#39;$&#39; &#39;S&#39;| tr &#39;&amp;&#39; &#39;&#43;&#39;| tr -d &#39;&gt;&#39;| tr -d &#39;&lt;&#39;| tr -d &#39;[&#39; | tr -d &#39;]&#39;| tr -d &#39;(&#39; | tr -d &#39;)&#39; | tr -d &#39;`&#39; | tr -d &#39;&#34;&#39; | tr -d \&#39;| tr -d \\ | tr -d &#39;|&#39; | tr -d &#39;;&#39; |tr -d &#39;*&#39; | tr -d &#39;?&#39;| tr -d &#39;~&#39; | tr -d &#39;/&#39;)
tempname=&#34;/tmp/pastebinReader/${fname}.txt&#34;
echo &#34;$pasteContent&#34; &gt; &#34;$tempname&#34;

#display the paste in terminal
#quotes around tempname has been removed. Bitbar seems to fail to parse the rest of the command when there are quotes. This should be fine as the spaces and tabs have been replaced with underscores in tempname variable.
echo &#34;---- Read :book: | bash=&#39;cat $tempname |less&#39;&#34;

#if a save directory is given, offer to save the paste
if [[ $saveDir != &#34;&#34; &amp;&amp; -d $saveDir ]]
then
echo &#34;---- Save :arrow_down: | bash=&#39;cat $tempname &gt; $saveDir/${fname}.txt&#39; terminal=false&#34;
else
echo &#34;---- Save Disabled | color=yellow&#34;
echo &#34;------ Go to config section to enable&#34;
fi

#if delete is enabled, give user a choice to delete paste

if [[ $deleteEnabled == 1 ]]
then
echo &#34;---- Delete&#34;
echo &#34;api_option=delete&amp;api_user_key=$usr_key&amp;api_dev_key=$dev_key&amp;api_paste_key=${pasteKeyArr[$i]}&#34; &gt; &#34;/tmp/pastebinReader/${fname}_delete_request.txt&#34;
echo &#34;------ Confirm | color = red bash=&#39;curl --silent --connect-timeout 15 --speed-time 15 --speed-limit 500  -X POST --data @/tmp/pastebinReader/${fname}_delete_request.txt $list_paste_url&#39; terminal=true&#34;
else
echo Delete Disabled
fi

i=$((i &#43; 1))



done

# test if it is a connectivity issue
elif [[ $(curl https://pastebin.com/api/api_post.php --silent --connect-timeout 15 --speed-time 15 --speed-limit 500| grep &#34;Bad API request&#34; -c) == 0  ]]
then

echo &#34;:warning: Disconnected | color=#DAA520&#34;
echo &#34;---&#34;
echo &#34;Refresh Now | refresh=true color=blue&#34;

else

echo &#34;:warning: Bad API Request | color=#800000&#34;
echo :warning: Please check keys for errors
echo &#34;---&#34;
echo &#34;Refresh Now | refresh=true color=blue&#34;

fi
</code></pre>
				</div>
			</div>
		</div>
	

		<footer class='container mx-auto text-white text-lg opacity-75 mt-8'>
			<div class='text-center p-16'>
				<p>
					<div>
						<a target='github' class='underline hover:text-white' href='https://github.com/matryer/xbar'>GitHub project</a>
						â€¢
						<a target='github' class='underline hover:text-white' href='https://github.com/matryer/xbar#writing-plugins'>Writing plugins guide</a>
					</div>
					<div class='mt-8'>
						Copyright &copy;2021 Mat Ryer + contributors â€¢ <a target='twitter' class='underline hover:text-white' href='https://twitter.com/matryer'>@matryer</a>
					</div>
					<div class='opacity-50 mt-2'>
						Last updated on 08 Mar 21 15:22 GMT
					</div>
				</p>
			</div>
		</footer>
	</body>
</html>
