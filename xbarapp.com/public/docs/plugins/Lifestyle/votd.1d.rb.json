{
	"plugin": {
		"files": [
			{
				"path": "Lifestyle/votd.1d.rb",
				"filename": "votd.1d.rb",
				"content": "#!/usr/bin/env ruby\n\n# Simple Verse of the Day plugin.\n#\n# by Harry LÃ¶wen\n#\n# Shows current verse of the day + verse image\n# Thanks to YouVersion API Devs!\n#\n# Feel free to customize version, language, colors, etc.\n\n# metadata\n# \u003cbitbar.title\u003eVerse of the day\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eHarry LÃ¶wen\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003eharryloewen\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eDisplay verse of the day and verse image.\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttps://drive.google.com/uc?export=download\u0026id=1dpt4wWamYbk_l49u8IAOVf66wA27cAi0\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003eruby\u003cbitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttps://github.com/harryloewen/bitbar-votd/\u003c/bitbar.abouturl\u003e\n\nrequire 'net/http'\nrequire 'open-uri'\nrequire 'json'\nrequire 'openssl'\nrequire 'Date'\nrequire 'base64'\n\nBIBLE_LOGO = 'https://www.bible.com/favicon.ico'.freeze\nBASE_URL = 'https://developers.youversionapi.com/1.0/verse_of_the_day'.freeze\nTODAY = Date.today.yday.to_s\nTOKEN = '...'.freeze\nLANG = 'en'.freeze\nVERSION_ID = '1'.freeze # KJV: 1, ASV: 12, RVES: 147, WEB: 20, ...\nCOLOR = '#696969'.freeze\n\nurl = URI(\"#{BASE_URL}/#{TODAY}?version_id=#{VERSION_ID}\")\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Get.new(url)\nrequest['content-type'] = 'application/json'\nrequest['accept'] = 'application/json'\nrequest['x-youversion-developer-token'] = TOKEN\nrequest['accept-language'] = LANG\n\nresponse = JSON.parse http.request(request).read_body\n\nputs \"\\n---\\nresponse: #{response['message']} | color=red\" if response['message']\n\nbible_logo = Base64.encode64(open(BIBLE_LOGO).read).delete(\"\\n\")\nreference = response['verse']['human_reference']\nverse = response['verse']['text'].split.each_slice(8).map{|a|a.join ' '}.join(\"| color=#{COLOR}\\n\")\nverse_url = response['verse']['url']\nimage_url = 'https:' + response['image']['url'].gsub('{width}', '300').gsub('{height}', '300')\nimage_base64 = Base64.encode64(open(image_url).read).delete(\"\\n\")\nimage_attribution = response['image']['attribution']\n\nputs \"\n#{reference} | image=#{bible_logo}\n---\n#{verse} | color=#{COLOR}\n#{reference} | color=#{COLOR}\n---\n| image=#{image_base64}\n#{image_attribution}\n---\nðŸ”—  open in bible.com | href=#{verse_url}\n---\nRefresh âŸ³| refresh=true\n\"\n"
			}
		],
		"path": "Lifestyle/votd.1d.rb",
		"filename": "votd.1d.rb",
		"dir": "Lifestyle",
		"docsPlugin": "Lifestyle/votd.1d.rb.html",
		"docsCategory": "Lifestyle.html",
		"pathSegments": [
			"Lifestyle"
		],
		"categoryPathSegments": [
			{
				"path": "Lifestyle",
				"text": "Lifestyle",
				"isLast": true
			}
		],
		"title": "Verse of the day",
		"version": "v1.0",
		"author": "Harry LÃ¶wen",
		"authors": [
			{
				"name": "Harry LÃ¶wen",
				"githubUsername": "harryloewen",
				"imageURL": "https://avatars.githubusercontent.com/u/33319470?v=4",
				"bio": "",
				"primary": true
			}
		],
		"desc": "Display verse of the day and verse image.",
		"imageURL": "https://drive.google.com/uc?export=download\u0026id=1dpt4wWamYbk_l49u8IAOVf66wA27cAi0",
		"dependencies": null,
		"aboutURL": "https://github.com/harryloewen/bitbar-votd/",
		"lastUpdated": "2021-03-08T15:21:56.70804Z",
		"vars": null
	}
}