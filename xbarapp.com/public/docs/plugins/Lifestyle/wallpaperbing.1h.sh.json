{
	"plugin": {
		"files": [
			{
				"path": "Lifestyle/wallpaperbing.1h.sh",
				"filename": "wallpaperbing.1h.sh",
				"content": "#!/bin/bash\n\n# \u003cbitbar.title\u003eBing Wallpapers\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev2.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eTok1\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003eTokfrans03\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eA new wallpaper from Bing every hour\u003c/bitbar.desc\u003e\n# \u003cbitbar.dependencies\u003eJQ\u003c/bitbar.dependencies\u003e\n\nexport PATH=\"/usr/local/bin:$PATH\"\n\nJQ=$(command -v jq)\n\nimageurls=(/tmp/imageurls.txt)\n\nfirst_time=$(defaults read wallpaperbing path 2\u003e\u00261 | grep exist)\n\n# If it's the first time we create a domain\n\nif [ ! \"$first_time\" = '' ]; then \n\n    defaults write wallpaperbing path /tmp/wallpaper.jpg\n\n    defaults write wallpaperbing setting today\n\nfi\n\nreadsetting=$(defaults read wallpaperbing setting)\n\ndefaultspath=$(defaults read wallpaperbing path)\n\n# Create a random number for random URL selection\n\nrandom=$((1 + RANDOM % 8))\n\n# check if JQ is installed\n\nif [ ! -e \"$JQ\" ]; then\n\n    echo \"Please install JQ with brew install JQ\"\n\n    echo ---\n\n    echo \"Install JQ | bash=brew param1=install param2=jq terminal=true\"\n    \n    echo ---\n\n    echo \"Update | refresh=true\"\n\n    exit\n\nfi\n\n# Download the json with all the image URLs\n\njson=$( (curl -s \"https://www.bing.com/HPImageArchive.aspx?format=js\u0026idx=0\u0026n=8\") | $JQ '.images')\n\nif [ \"$1\" = '' ]; then\n\n    #Bing logo\n\n    echo \"| templateImage=iVBORw0KGgoAAAANSUhEUgAAAAwAAAAPCAQAAAB66ObCAAAAr0lEQVR4AXWNM0LHARzFP9l2nSCObR0g2xfItrV2gbzEuZZca+25lrDl+tv88Wu+B09sUE88MtFhQUez8sLCgNqinxDClRa95LLHBHnE4CP9OMDCDxfMU0CakKPRVVvQcC1chNPBJUZHbxYuIIpR/oSLP2oJpppTD9gP6PlghFJ20biGBo4ogzfW2OEbi0sf6CYW4JwPz/CLRTIAAHLYQOsAOKGAQAQSySQvzJGIQKxs7lzLIn88zwAAAABJRU5ErkJggg==\"\n    echo ---\n    \n    \n    echo \"Update | refresh=true\"\n    \n    echo ---\n    \n    echo \"Options\"\n    echo \"--Today | bash=$0 param1='set' param2='today' terminal=false refresh=true\"\n    echo \"--Random | bash=$0 param1='set' param2='random' terminal=false refresh=true\"\n    \n\n\n    if [ \"$readsetting\" = \"today\" ]; then\n\n        echo \"Current setting: Today\"\n\n        $0 today\n\n    else\n    \n      echo \"Current setting: Random\"\n\n        $0 random\n\n    fi\n\nfi\n\nif [ \"$1\" = 'set' ]; then\n\n    if [ \"$2\" = 'today' ]; then\n\n        defaults write wallpaperbing setting today\n\n    fi\n\n    if [ \"$2\" = 'random' ]; then\n\n        defaults write wallpaperbing setting random\n\n    fi\nfi\n\n\nif [ \"$1\" = 'today' ]; then\n\n    # Decide path for the wallpaper \n\n    if [ \"$defaultspath\" = \"/tmp/wallpaper1.jpg\" ]; then\n\n        wallpaperpath=(\"/tmp/wallpaper1.jpg\")\n\n        defaults write wallpaperbing path /tmp/wallpaper.jpg\n\n        rm /tmp/wallpaper.jpg 2\u003e\u0026-\n\n    else\n\n        wallpaperpath=(\"/tmp/wallpaper.jpg\")\n\n        defaults write wallpaperbing path /tmp/wallpaper1.jpg\n\n        rm /tmp/wallpaper1.jpg 2\u003e\u0026-\n\n        # echo aaaaa\n\n        echo \"${wallpaperpath[0]}\"\n\n    fi\n\n    # Create setting to remember\n\n    defaults write wallpaperbing setting today\n\n    echo \"$json\" | $JQ '.[0]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/ \u003e /tmp/imageurls.txt\n\n    curl -s -L \"$(cat \"${imageurls[0]}\")\" -o \"${wallpaperpath[0]}\"\n\n    # Get comment\n\n    Comment=$(echo \"$json\" | $JQ '.[0]' | $JQ '.copyright' | sed s/'\"'// | sed s/'\"'//)\n\n    echo \"$Comment\"\n\n    # Set dummy image as wallpaper so Finder will change the wallpaper to the pic that we want\n\n    # No langer needed as we choose a new name every time\n\n    # echo \"iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=\" | base64 -D -o \"/tmp/dummyimg.jpg\"\n\n    # osascript -e 'tell application \"Finder\" to set desktop picture to POSIX file \"/private/tmp/dummyimg.jpg\"'\n\n    # Set image as wallpaper\n\n    if [ \"${wallpaperpath[0]}\" == \"/tmp/wallpaper.jpg\" ]; then\n    \n    osascript -e 'tell application \"Finder\" to set desktop picture to POSIX file \"/tmp/wallpaper.jpg\"'\n\n    else\n\n    osascript -e 'tell application \"Finder\" to set desktop picture to POSIX file \"/tmp/wallpaper1.jpg\"'\n\nfi\n\n# Cleanup\n \n# rm /tmp/imageurls.txt\n\nexit\nfi\n\nif [ \"$1\" = 'random' ]; then\n\n    # Decide path for the wallpaper \n\n    if [ \"$defaultspath\" = \"/tmp/wallpaper1.jpg\" ]; then\n\n        wallpaperpath=(\"/tmp/wallpaper1.jpg\")\n\n        defaults write wallpaperbing path /tmp/wallpaper.jpg\n\n        rm /tmp/wallpaper.jpg 2\u003e\u0026-\n\n    else\n\n        wallpaperpath=(\"/tmp/wallpaper.jpg\")\n\n        defaults write wallpaperbing path /tmp/wallpaper1.jpg\n\n        rm /tmp/wallpaper1.jpg 2\u003e\u0026-\n\n    fi\n\n    # Create setting to remember\n\n    defaults write wallpaperbing setting random\n\n    # Add URLs to a file and add bing to the beginning \n\n    echo \"$json\" | $JQ '.[0]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/ \u003e /tmp/imageurls.txt\n    {\n    echo \"$json\" | $JQ '.[1]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/ \n    echo \"$json\" | $JQ '.[3]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/\n    echo \"$json\" | $JQ '.[2]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/\n    echo \"$json\" | $JQ '.[4]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/\n    echo \"$json\" | $JQ '.[5]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/\n    echo \"$json\" | $JQ '.[6]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/\n    echo \"$json\" | $JQ '.[7]' | $JQ '.url' | sed s/'\"'// | sed s/'\"'// | sed s/'\\/'/'https:\\/\\/bing.com\\/'/\n    } \u003e\u003e /tmp/imageurls.txt\n\n\n\n    # Select a URL from a random line \n\n    randomurl=$(\u003c \"${imageurls[0]}\" sed ''\"$random\"'q;d')\n\n    # Download image from the server\n\n    curl -s -L \"$randomurl\" -o \"${wallpaperpath[0]}\"\n\n    # Set dummy image as wallpaper so Finder will change the wallpaper to the pic that we want\n\n    # No langer needed as we choose a new name every time\n\n    # echo \"iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=\" | base64 -D -o \"/tmp/dummyimg.jpg\"\n\n    # osascript -e 'tell application \"Finder\" to set desktop picture to POSIX file \"/private/tmp/dummyimg.jpg\"'\n\n    # Set image as wallpaper\n\n    if [ \"${wallpaperpath[0]}\" == \"/tmp/wallpaper.jpg\" ]; then\n \n    osascript -e 'tell application \"Finder\" to set desktop picture to POSIX file \"/tmp/wallpaper.jpg\"'\n\n    else\n\n    osascript -e 'tell application \"Finder\" to set desktop picture to POSIX file \"/tmp/wallpaper1.jpg\"'\n\n    fi\n\n    # Cleanup\n\n    rm /tmp/imageurls.txt\n\n    echo \"Random Url: $random\"\n\n    exit\nfi\n"
			}
		],
		"path": "Lifestyle/wallpaperbing.1h.sh",
		"filename": "wallpaperbing.1h.sh",
		"dir": "Lifestyle",
		"docsPlugin": "Lifestyle/wallpaperbing.1h.sh.html",
		"docsCategory": "Lifestyle.html",
		"pathSegments": [
			"Lifestyle"
		],
		"categoryPathSegments": [
			{
				"path": "Lifestyle",
				"text": "Lifestyle",
				"isLast": true
			}
		],
		"title": "Bing Wallpapers",
		"version": "v2.0",
		"author": "Tok1",
		"authors": [
			{
				"name": "Tok1",
				"githubUsername": "Tokfrans03",
				"imageURL": "https://avatars.githubusercontent.com/u/34898241?v=4",
				"bio": "",
				"primary": true
			}
		],
		"desc": "A new wallpaper from Bing every hour",
		"imageURL": "https://xbarapp.com/public/img/xbar-2048.png",
		"dependencies": [
			"JQ"
		],
		"aboutURL": "",
		"lastUpdated": "2021-03-08T15:21:56.67851Z",
		"vars": null
	}
}