{
	"plugin": {
		"files": [
			{
				"path": "System/clipboard-history.3s.sh",
				"filename": "clipboard-history.3s.sh",
				"content": "#!/bin/bash\n\n# \u003cbitbar.title\u003eClipboard History\u003c/bitbar.title\u003e\n# \u003cbitbar.author\u003eJason Tokoph (jason@tokoph.net)\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003ejtokoph\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eTracks up to 10 clipboard items.\n# \u003cbitbar.version\u003e1.0\u003c/bitbar.version\u003e\n# Clicking on a previous item will copy it back to the clipboard.\n# Clicking \"Clear history\" will remove history files from the filesystem.\u003c/bitbar.desc\u003e\n\n# Hack for language not being set properly and unicode support\nexport LANG=\"${LANG:-en_US.UTF-8}\"\n\ntmp_dir=\"/tmp/bitbar-clipboard-history_$USER\"\n\n# Make sure temporary directory exists\nmkdir -p \"$tmp_dir\" \u0026\u003e /dev/null\n\n# If user clicked on a history item, copy it back to the clipboard\nif [[ \"$1\" = \"copy\" ]]; then\n  if [[ -e \"$tmp_dir/item-$2.pb\" ]]; then\n    pbcopy \u003c \"$tmp_dir/item-$2.pb\"\n    osascript -e \"display notification \\\"Copied to Clipboard\\\" with title \\\"BitBar Clipboard History\\\"\" \u0026\u003e /dev/null\n  fi\n  exit\nfi\n\n# If user clicked clear, remove history items\nif [[ \"$1\" = \"clear\" ]]; then\n  rm -f \"$tmp_dir\"/item-*.pb\n  osascript -e \"display notification \\\"Cleared clipboard history\\\" with title \\\"BitBar Clipboard History\\\"\" \u0026\u003e /dev/null\n  exit\nfi\n\nCLIPBOARD=$(pbpaste)\n# Check to see if we have text on the clipboard\nif [ \"$CLIPBOARD\" != \"\" ]; then\n\n  # Check if the current clipboard content is differnt from the previous\n  echo \"$CLIPBOARD\" | diff \"$tmp_dir/item-current.pb\" - \u0026\u003e /dev/null\n\n  # If so, the diff command will exit wit a non-zero status\n  # shellcheck disable=SC2181\n  if [ \"$?\" != \"0\" ]; then\n\n    # Move the history backwards\n    for i in {9..1}\n    do\n      j=$((i+1))\n\n      if [ -e \"$tmp_dir/item-$i.pb\" ]; then\n        cp \"$tmp_dir/item-$i.pb\" \"$tmp_dir/item-$j.pb\" \u0026\u003e /dev/null\n      fi\n    done\n\n    # Move the previous value into the history\n    cp \"$tmp_dir/item-current.pb\" \"$tmp_dir/item-1.pb\" \u0026\u003e /dev/null\n\n    # Save current value\n    echo \"$CLIPBOARD\" \u003e \"$tmp_dir/item-current.pb\"\n  fi\nfi\n\n# Print icon\necho 'âœ„'\necho \"---\"\n\n# Print up to 36 characters of the current clipboard\necho \"Current\"\n\ncontent=\"$(pbpaste | head -c 36)\"\nif (( $(pbpaste | wc -c) \u003e 36 )); then\n  content=\"$content...\"\nfi\necho \"${content//|/ }\"\n\n# Show history section if historical files exist\nif [[ -e \"$tmp_dir/item-1.pb\" ]]; then\n\n  echo \"---\"\n\n  echo 'History (Click to copy)'\n\n  # Print up to 36 characters of each historical item\n  for i in {1..10}\n  do\n    if [ -e \"$tmp_dir/item-$i.pb\" ]; then\n      content=\"$(head -c 36 \"$tmp_dir/item-$i.pb\")\"\n      if (( $(wc -c \"$tmp_dir/item-$i.pb\" | awk '{print $1}') \u003e 36 )); then\n        content=\"$content...\"\n      fi\n      echo \"${content//|/ }|bash='$0' param1=copy param2=$i refresh=true terminal=false\"\n    fi\n  done\n\n  echo \"---\"\n\n  echo \"Clear History |bash='$0' param1=clear refresh=true terminal=false \"\nfi\n"
			}
		],
		"path": "System/clipboard-history.3s.sh",
		"filename": "clipboard-history.3s.sh",
		"dir": "System",
		"docsPlugin": "System/clipboard-history.3s.sh.html",
		"docsCategory": "System.html",
		"pathSegments": [
			"System"
		],
		"categoryPathSegments": [
			{
				"path": "System",
				"text": "System",
				"isLast": true
			}
		],
		"title": "Clipboard History",
		"version": "1.0",
		"author": "Jason Tokoph (jason@tokoph.net)",
		"authors": [
			{
				"name": "Jason Tokoph",
				"githubUsername": "jtokoph",
				"imageURL": "https://avatars.githubusercontent.com/u/346225?v=4",
				"bio": "wigglezipheartpeach",
				"primary": true
			}
		],
		"desc": "",
		"imageURL": "https://xbarapp.com/public/img/xbar-2048.png",
		"dependencies": null,
		"aboutURL": "",
		"lastUpdated": "2021-03-08T15:22:02.811851Z",
		"vars": null
	}
}