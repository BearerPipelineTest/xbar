{
	"plugin": {
		"files": [
			{
				"path": "Weather/weather.15m.sh",
				"filename": "weather.15m.sh",
				"content": "#!/bin/bash\n#\n# \u003cbitbar.title\u003eweather\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eChongyu Yuan\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003ennnggel\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003ereal-time Chinese weather info(includes aqi), required jq(https://aqicn.org/api/) and aqi token(https://aqicn.org/api/)(\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttps://s2.ax1x.com/2019/04/01/As7pVO.jpg\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003ebash,jq\u003c/bitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttp://www.yuanchongyu.com\u003c/bitbar.abouturl\u003e\n\nMENUFONT=\"size=12 font=UbuntuMono-Bold\"\nCOLORS=(\"#0ed812\" \"#ffde33\" \"#ff9933\" \"#cc0033\" \"#660099\" \"#7e0023\")\n\n# where to get the token -\u003e https://www.juhe.cn/docs/api/id/73\nWEATHER_TOKEN=\"xxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\nWEATHER_CITY=\"xx\" #eg. ‰∏äÊµ∑\n\n# where to get the token -\u003e https://aqicn.org/api/\nAQI_TOKEN=\"xxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\nAQI_CITY=\"xx\" #eg. shanghai\nAQI_DETAIL_URL=\"http://aqicn.org/city/${AQI_CITY}/\"\n\n\nWEATHER_DATA=$(curl -s \"http://apis.juhe.cn/simpleWeather/query?city=${WEATHER_CITY}\u0026key=${WEATHER_TOKEN}\")\n# DELETE ME, TEST DATA\nWEATHER_DATA=\"{\\\"reason\\\":\\\"Êü•ËØ¢ÊàêÂäü!\\\",\\\"result\\\":{\\\"city\\\":\\\"‰∏äÊµ∑\\\",\\\"realtime\\\":{\\\"temperature\\\":\\\"15\\\",\\\"humidity\\\":\\\"25\\\",\\\"info\\\":\\\"Êô¥\\\",\\\"wid\\\":\\\"00\\\",\\\"direct\\\":\\\"ÂåóÈ£é\\\",\\\"power\\\":\\\"0Á∫ß\\\",\\\"aqi\\\":\\\"55\\\"},\\\"future\\\":[{\\\"date\\\":\\\"2019-04-01\\\",\\\"temperature\\\":\\\"9\\\\/17‚ÑÉ\\\",\\\"weather\\\":\\\"Êô¥ËΩ¨Â§ö‰∫ë\\\",\\\"wid\\\":{\\\"day\\\":\\\"00\\\",\\\"night\\\":\\\"01\\\"},\\\"direct\\\":\\\"ÂçóÈ£é\\\"},{\\\"date\\\":\\\"2019-04-02\\\",\\\"temperature\\\":\\\"11\\\\/16‚ÑÉ\\\",\\\"weather\\\":\\\"Èò¥ËΩ¨Â§ö‰∫ë\\\",\\\"wid\\\":{\\\"day\\\":\\\"02\\\",\\\"night\\\":\\\"01\\\"},\\\"direct\\\":\\\"‰∏úÂçóÈ£éËΩ¨‰∏úÈ£é\\\"},{\\\"date\\\":\\\"2019-04-03\\\",\\\"temperature\\\":\\\"11\\\\/17‚ÑÉ\\\",\\\"weather\\\":\\\"Èò¥\\\",\\\"wid\\\":{\\\"day\\\":\\\"02\\\",\\\"night\\\":\\\"02\\\"},\\\"direct\\\":\\\"‰∏úÈ£éËΩ¨‰∏úÂçóÈ£é\\\"},{\\\"date\\\":\\\"2019-04-04\\\",\\\"temperature\\\":\\\"13\\\\/15‚ÑÉ\\\",\\\"weather\\\":\\\"Â∞èÈõ®\\\",\\\"wid\\\":{\\\"day\\\":\\\"07\\\",\\\"night\\\":\\\"07\\\"},\\\"direct\\\":\\\"‰∏úÂçóÈ£éËΩ¨ÂçóÈ£é\\\"},{\\\"date\\\":\\\"2019-04-05\\\",\\\"temperature\\\":\\\"13\\\\/19‚ÑÉ\\\",\\\"weather\\\":\\\"Â§ö‰∫ë\\\",\\\"wid\\\":{\\\"day\\\":\\\"01\\\",\\\"night\\\":\\\"01\\\"},\\\"direct\\\":\\\"Ë•øÂåóÈ£éËΩ¨ÂçóÈ£é\\\"}]},\\\"error_code\\\":0}\"\n\nWEATHER_RES_REALTIME=$(echo \"${WEATHER_DATA}\" | /usr/local/bin/jq '.result.realtime')\nWEATHER_RES_REALTIME_INFO=$(echo \"${WEATHER_RES_REALTIME}\" | /usr/local/bin/jq -r '.info')\nWEATHER_RES_REALTIME_TEMPERATURE=$(echo \"${WEATHER_RES_REALTIME}\" | /usr/local/bin/jq -r '.temperature')\nWEATHER_FUTURE=$(echo \"${WEATHER_DATA}\" | /usr/local/bin/jq '.result.future')\nWEATHER_FUTURE_LENGTH=$(echo \"${WEATHER_FUTURE}\" | /usr/local/bin/jq 'length')\n\nAQI_DATA=$(curl -s \"http://api.waqi.info/feed/${AQI_CITY}/?token=${AQI_TOKEN}\")\n# DELETE ME, TEST DATA\nAQI_DATA=\"{\\\"status\\\":\\\"ok\\\",\\\"data\\\":{\\\"aqi\\\":824,\\\"idx\\\":1437,\\\"attributions\\\":[{\\\"url\\\":\\\"http://www.semc.gov.cn/\\\",\\\"name\\\":\\\"Shanghai Environment Monitoring Center(‰∏äÊµ∑Â∏ÇÁéØÂ¢ÉÁõëÊµã‰∏≠ÂøÉ)\\\"},{\\\"url\\\":\\\"http://106.37.208.233:20035/emcpublish/\\\",\\\"name\\\":\\\"China National Urban air quality real-time publishing platform (ÂÖ®ÂõΩÂüéÂ∏ÇÁ©∫Ê∞îË¥®ÈáèÂÆûÊó∂ÂèëÂ∏ÉÂπ≥Âè∞)\\\"},{\\\"url\\\":\\\"https://china.usembassy-china.org.cn/embassy-consulates/shanghai/air-quality-monitor-stateair/\\\",\\\"name\\\":\\\"U.S. Consulate Shanghai Air Quality Monitor\\\"},{\\\"url\\\":\\\"https://waqi.info/\\\",\\\"name\\\":\\\"World Air Quality Index Project\\\"}],\\\"city\\\":{\\\"geo\\\":[31.2047372,121.4489017],\\\"name\\\":\\\"Shanghai (‰∏äÊµ∑)\\\",\\\"url\\\":\\\"https://aqicn.org/city/shanghai\\\"},\\\"dominentpol\\\":\\\"pm25\\\",\\\"iaqi\\\":{\\\"co\\\":{\\\"v\\\":6.4},\\\"h\\\":{\\\"v\\\":20.4},\\\"no2\\\":{\\\"v\\\":20.2},\\\"o3\\\":{\\\"v\\\":67.5},\\\"p\\\":{\\\"v\\\":1019.2},\\\"pm10\\\":{\\\"v\\\":57},\\\"pm25\\\":{\\\"v\\\":824},\\\"so2\\\":{\\\"v\\\":4.6},\\\"t\\\":{\\\"v\\\":17.5},\\\"w\\\":{\\\"v\\\":0.3}},\\\"time\\\":{\\\"s\\\":\\\"2019-04-01 17:00:00\\\",\\\"tz\\\":\\\"+08:00\\\",\\\"v\\\":1554138000},\\\"debug\\\":{\\\"sync\\\":\\\"2019-04-01T18:49:19+09:00\\\"}}}\"\n\n# how to install jq -\u003e https://stedolan.github.io/jq/download/\nAQI_RES=$(echo \"${AQI_DATA}\" | /usr/local/bin/jq '.data.aqi')\n\nfunction aqi_colorize {\n  if [ \"$1\" -le 50 ]; then\n    echo \"${COLORS[0]}\"\n  elif [ \"$1\" -le 100 ]; then\n    echo \"${COLORS[1]}\"\n  elif [ \"$1\" -le 150 ]; then\n    echo \"${COLORS[2]}\"\n  elif [ \"$1\" -le 200 ]; then\n    echo \"${COLORS[3]}\"\n  elif [ \"$1\" -le 300 ]; then\n    echo \"${COLORS[4]}\"\n  else\n    echo \"${COLORS[5]}\"\n  fi\n}\n\nCOLOR=\"$(aqi_colorize \"${AQI_RES}\")\"\necho \"üå°Ô∏è${WEATHER_RES_REALTIME_INFO}${WEATHER_RES_REALTIME_TEMPERATURE}‚ÑÉüò∑${AQI_RES} | color=${COLOR} ${MENUFONT}\"\necho \"---\"\nfor(( i=0;i\u003cWEATHER_FUTURE_LENGTH;i++)) do\n  WEATHER_FUTURE_N=$(echo \"${WEATHER_FUTURE}\" | /usr/local/bin/jq \".[${i}]\")\n  WEATHER_FUTURE_N_DATE=$(echo \"${WEATHER_FUTURE_N}\" | /usr/local/bin/jq -r '.date')\n  WEATHER_FUTURE_N_WEATHER=$(echo \"${WEATHER_FUTURE_N}\" | /usr/local/bin/jq -r '.weather')\n  WEATHER_FUTURE_N_TEMPERATURE=$(echo \"${WEATHER_FUTURE_N}\" | /usr/local/bin/jq -r '.temperature')\n  echo \"${WEATHER_FUTURE_N_DATE} ${WEATHER_FUTURE_N_WEATHER}Ôºà${WEATHER_FUTURE_N_TEMPERATURE}Ôºâ\";\ndone;\necho \"AQI Detail... | href=${AQI_DETAIL_URL}\"\necho \"Refresh... | refresh=true\""
			}
		],
		"path": "Weather/weather.15m.sh",
		"filename": "weather.15m.sh",
		"dir": "Weather",
		"docsPlugin": "Weather/weather.15m.sh.html",
		"docsCategory": "Weather.html",
		"pathSegments": [
			"Weather"
		],
		"categoryPathSegments": [
			{
				"path": "Weather",
				"text": "Weather",
				"isLast": true
			}
		],
		"title": "weather",
		"version": "v1.0",
		"author": "Chongyu Yuan",
		"authors": [
			{
				"name": "Chongyu Yuan",
				"githubUsername": "nnnggel",
				"imageURL": "https://avatars.githubusercontent.com/u/17697169?v=4",
				"bio": "",
				"primary": true
			}
		],
		"desc": "real-time Chinese weather info(includes aqi), required jq(https://aqicn.org/api/) and aqi token(https://aqicn.org/api/)(",
		"imageURL": "https://s2.ax1x.com/2019/04/01/As7pVO.jpg",
		"dependencies": [
			"bash",
			"jq"
		],
		"aboutURL": "http://www.yuanchongyu.com",
		"lastUpdated": "2021-03-08T15:22:08.866956Z",
		"vars": null
	}
}