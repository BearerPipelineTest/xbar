{
	"plugin": {
		"files": [
			{
				"path": "Web/disqus_comments.rb",
				"filename": "disqus_comments.rb",
				"content": "#!/usr/bin/env ruby\n\n# \u003cbitbar.title\u003eDidqus Comments\u003c/bitbar.title\u003e\n# \u003cbitbar.version\u003ev1.0\u003c/bitbar.version\u003e\n# \u003cbitbar.author\u003eCaleb Marble\u003c/bitbar.author\u003e\n# \u003cbitbar.author.github\u003emarblenix\u003c/bitbar.author.github\u003e\n# \u003cbitbar.desc\u003eShow comment count per post and number of commenets that are pending.\u003c/bitbar.desc\u003e\n# \u003cbitbar.image\u003ehttps://raw.githubusercontent.com/marblenix/Disqus-Comments/master/disqus.png\u003c/bitbar.image\u003e\n# \u003cbitbar.dependencies\u003eruby\u003c/bitbar.dependencies\u003e\n# \u003cbitbar.abouturl\u003ehttps://github.com/marblenix/Disqus-Comments\u003c/bitbar.abouturl\u003e\n\nrequire 'net/http'\nrequire 'json'\n\n# Get your API key here: https://disqus.com/api/applications/\n# You only need \"read\" permissions and the public key.\npublic_key = ENV[\"DISQUS_API_KEY\"] || ''\nforum = ENV[\"DISQUS_FORUM\"] || 'marblenix' # Disqus shortname\n\nthreads_url = \"https://disqus.com/api/3.0/forums/listThreads.json\" +\n           \"?api_key=#{public_key}\" +\n           \"\u0026forum=#{forum}\"\n\npending_url = \"https://disqus.com/api/3.0/posts/list.json\" +\n           \"?api_key=#{public_key}\" +\n           \"\u0026forum=#{forum}\" +\n           \"\u0026include=unapproved\"\n\nthread_uri = URI(threads_url)\npending_uri = URI(pending_url)\n\nthread_results = JSON.parse(Net::HTTP.get(thread_uri))\npending_results = JSON.parse(Net::HTTP.get(pending_uri))\n\nthreads = []\npending = []\n\nif thread_results[\"code\"] == 0\n    posts = thread_results[\"response\"]\n    for post in posts\n        next if post[\"isClosed\"] == true\n        next if post[\"isDeleted\"] == true\n        threads \u003c\u003c {\n            \"link\"  =\u003e post[\"link\"],\n            \"title\" =\u003e post[\"clean_title\"],\n            \"posts\" =\u003e post[\"posts\"]\n        }\n    end\nend\n\nif pending_results[\"code\"] == 0\n    posts = pending_results[\"response\"]\n    for post in posts\n        next if post[\"isSpam\"] == true\n        next if post[\"isDeleted\"] == true\n        next if post[\"isDeletedByAuthor\"] == true\n        pending \u003c\u003c {\n            \"createdAt\" =\u003e post[\"createdAt\"]\n        }\n    end\nend\n\ncolor = pending.count \u003e 0 ? \"red\" : \"black\"\n\nputs \"#{forum.capitalize} | color=#{color}\"\nputs \"---\"\n\nputs \"#{pending.count}\\tComment(s) Pending... | href=https://#{forum}.disqus.com/admin/moderate/#/pending\"\n\nputs \"---\"\n\nfor thread in threads\n    puts \"#{thread[\"posts\"]}\\t#{thread[\"title\"]} | href=#{thread[\"link\"]}\"\nend\n"
			}
		],
		"path": "Web/disqus_comments.rb",
		"filename": "disqus_comments.rb",
		"dir": "Web",
		"docsPlugin": "Web/disqus_comments.rb.html",
		"docsCategory": "Web.html",
		"pathSegments": [
			"Web"
		],
		"categoryPathSegments": [
			{
				"path": "Web",
				"text": "Web",
				"isLast": true
			}
		],
		"title": "Didqus Comments",
		"version": "v1.0",
		"author": "Caleb Marble",
		"authors": [
			{
				"name": "Cassidy Marble",
				"githubUsername": "marblenix",
				"imageURL": "https://avatars.githubusercontent.com/u/6401427?v=4",
				"bio": "",
				"primary": true
			}
		],
		"desc": "Show comment count per post and number of commenets that are pending.",
		"imageURL": "https://raw.githubusercontent.com/marblenix/Disqus-Comments/master/disqus.png",
		"dependencies": [
			"ruby"
		],
		"aboutURL": "https://github.com/marblenix/Disqus-Comments",
		"lastUpdated": "2021-03-08T15:22:09.562792Z",
		"vars": null
	}
}